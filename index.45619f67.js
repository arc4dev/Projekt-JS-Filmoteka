var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},a={},n=e.parcelRequire2353;null==n&&((n=function(e){if(e in t)return t[e].exports;if(e in a){var n=a[e];delete a[e];var r={id:e,exports:{}};return t[e]=r,n.call(r.exports,r,r.exports),r.exports}var o=new Error("Cannot find module '"+e+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(e,t){a[e]=t},e.parcelRequire2353=n);var r=n("g2Y6z"),o=(r=n("g2Y6z"),n("epbGi")),s=n("7IoHk");const i=document.getElementById("pagination-container"),l=document.querySelector(".container-genres");async function c(e,t){try{let a;""!==t&&(a=`${o.URL_SEARCH}api_key=${o.API_KEY}&language=${o.API_LANGUAGE}&query=${t.trim()}&page=${e}`,i.classList.remove("is-hidden"));let n=await(0,r.getMovies)(e,a);return 0===n.results.length?(s.Notify.failure("Nie ma filmów o takiej nazwie! Spróbuj ponownie..."),i.classList.add("is-hidden"),l.classList.add("is-hidden")):(i.classList.remove("is-hidden"),l.classList.remove("is-hidden")),n}catch(e){throw e}}var d=n("8fUuz");const g=document.querySelector(".pagination-container"),u=e=>{g.innerHTML="";const t=p(),a=f(),n=h(t,a,e);g.innerHTML=n,v()},p=()=>{let e=A.page-Math.floor(2.5);return A.totalPages<=5?e=1:A.page>=A.totalPages-Math.floor(2.5)&&(e=Math.max(1,A.page-Math.floor(2.5))),Math.max(1,e)},f=()=>{let e=A.page+Math.floor(2.5)-1;return A.totalPages<=5?e=A.totalPages:A.page<=Math.floor(2.5)&&(e=5),Math.min(A.totalPages,e)},h=(e,t,a)=>{let n="";e>1&&(n+=m(1),e>2&&(n+='<span class="pagination-ellipsis">...</span>'));for(let a=e;a<=t;a++)n+=m(a);return t<a&&(t<a-1&&(n+='<span class="pagination-ellipsis">...</span>'),n+=m(a)),n},m=e=>`<button class="pagination-button" data-page="${e}">${e}</button>`,v=()=>{document.querySelectorAll(".pagination-button").forEach((e=>{e.addEventListener("click",(function(){(async(e,t)=>{try{(0,d.renderLoadingSpinner)(_);const{results:a,total_pages:n}=await c(e,t);A.page=e,A.movies=a,A.totalPages=Math.min(n,10),(0,r.renderMoviesList)(a),u(A.totalPages)}catch(e){throw e}})(parseInt(e.dataset.page),A.query)}))}))};var y=n("hGVxz");o=n("epbGi"),r=n("g2Y6z");const L=async e=>{const t=e.target.textContent;try{const e=M(t),a=await w(e);(0,r.renderMoviesList)(a),u()}catch(e){console.error(e)}},M=e=>{for(const t in r.genresList)if(r.genresList[t]===e)return t},w=async e=>{try{return(await y.default.get(`${o.API_URL}discover/movie?api_key=${o.API_KEY}&language=${o.API_LANGUAGE}&with_genres=${e}&sort_by=popularity.desc`)).data.results}catch(e){throw e}};n("71FD4");r=n("g2Y6z"),d=n("8fUuz");n("jUMkF");var P=n("dDcbB");n("8h1Dk");const E=document.getElementById("search-form"),_=document.querySelector(".covers-container"),b=document.getElementById("close-modal"),q=document.querySelector(".container-genres").querySelectorAll(".genres"),A={movies:[],page:1,perPage:20,totalPages:0,query:""};E&&(async()=>{try{(0,d.renderLoadingSpinner)(_);const{results:e,total_pages:t}=await(0,r.getMovies)(A.page);A.movies=e,A.totalPages=Math.min(t,10),(0,r.renderMoviesList)(A.movies),u(A.totalPages)}catch(e){console.error(e)}})(),E&&E.addEventListener("submit",(async e=>{try{e.preventDefault();const t=e.target.elements.searchInput;if(!t)return;(0,d.renderLoadingSpinner)(_);const{results:a,total_pages:n}=await c(A.page,t.value);A.movies=a,A.totalPages=Math.min(n,10),A.query=t.value.trim(),(0,r.renderMoviesList)(A.movies),u(A.totalPages)}catch(e){console.error(e)}})),_.addEventListener("click",P.openModal),b.addEventListener("click",P.closeModal),q.forEach((e=>{e.addEventListener("click",L)}));
//# sourceMappingURL=index.45619f67.js.map
